<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ambient Mood Lamp - Interactive Demo</title>
    

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a0f1f 50%, #0f0a1a 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            color: white;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(138, 43, 226, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(75, 0, 130, 0.03) 0%, transparent 50%);
            pointer-events: none;
            animation: spookyPulse 8s ease-in-out infinite;
        }
        
        @keyframes spookyPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        .container {
            display: flex;
            gap: 40px;
            align-items: flex-start;
            padding: 40px 20px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .lamp-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .lamp-container {
            position: relative;
            width: 200px;
            height: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            filter: drop-shadow(0 0 40px var(--glow-color, rgba(90, 79, 240, 0.5)));
        }

        .lamp-top {
            width: 80px;
            height: 30px;
            background: linear-gradient(180deg, #2a2a3e 0%, #1a1a2e 100%);
            border-radius: 10px 10px 0 0;
            border: 2px solid #3a3a4e;
            box-shadow: inset 0 2px 4px rgba(138, 43, 226, 0.3);
        }

        .lamp-glass {
            position: relative;
            width: 180px;
            height: 400px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            box-shadow: 0 0 60px var(--glow-color, rgba(90, 79, 240, 0.4));
            transition: all 0.5s ease;
        }

        .lamp-base {
            width: 100px;
            height: 40px;
            background: linear-gradient(180deg, #1a1a2e 0%, #2a2a3e 100%);
            border-radius: 0 0 15px 15px;
            border: 2px solid #3a3a4e;
            margin-top: -2px;
            box-shadow: inset 0 -2px 4px rgba(0, 0, 0, 0.5);
        }

        .lava-blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(25px);
            opacity: 0.85;
            animation: float 8s ease-in-out infinite;
            mix-blend-mode: screen;
        }

        .blob1 {
            width: 90px;
            height: 90px;
            background: radial-gradient(circle, var(--color1, #5A4FF0) 0%, var(--color2, #7A7AF5) 100%);
            left: 15%;
            animation-delay: 0s;
        }
        .blob2 { width: 110px; height: 110px; background: radial-gradient(circle, var(--color2, #7A7AF5) 0%, var(--color1, #5A4FF0) 100%); right: 10%; animation-delay: 2s; }
        .blob3 { width: 70px; height: 70px; background: radial-gradient(circle, var(--color1, #5A4FF0) 0%, var(--color2, #7A7AF5) 100%); left: 35%; animation-delay: 4s; }
        .blob4 { width: 80px; height: 80px; background: radial-gradient(circle, var(--color2, #7A7AF5) 0%, var(--color1, #5A4FF0) 100%); right: 25%; animation-delay: 6s; }
        @keyframes float { 0%, 100% { transform: translateY(350px) scale(1); } 50% { transform: translateY(20px) scale(1.15); } }
        .title { 
            font-size: 32px; 
            font-weight: bold; 
            text-align: center; 
            color: #fff; 
            text-shadow: 0 0 20px var(--glow-color, rgba(90, 79, 240, 0.8)), 0 0 40px var(--glow-color, rgba(90, 79, 240, 0.4)); 
            margin-bottom: 10px;
            animation: flicker 3s ease-in-out infinite;
        }
        
        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.95; }
            75% { opacity: 0.98; }
        }
        .controls { 
            background: rgba(10, 10, 15, 0.9); 
            padding: 30px; 
            border-radius: 20px; 
            backdrop-filter: blur(10px); 
            border: 2px solid rgba(138, 43, 226, 0.2); 
            min-width: 320px; 
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6), 0 0 20px rgba(138, 43, 226, 0.1); 
        }
        h2 { margin-bottom: 20px; font-size: 24px; color: #fff; text-align: center; }
        .control-group { margin-bottom: 25px; }
        .control-group label { display: block; margin-bottom: 10px; font-size: 14px; color: rgba(255, 255, 255, 0.9); font-weight: 500; }
        .mood-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .mood-btn { padding: 14px; border: 2px solid rgba(255, 255, 255, 0.2); background: rgba(255, 255, 255, 0.05); color: white; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; font-size: 15px; font-weight: 500; }
        .mood-btn:hover { background: rgba(255, 255, 255, 0.15); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
        .mood-btn.active { border-color: var(--color1, #5A4FF0); background: var(--color1, #5A4FF0); box-shadow: 0 0 20px var(--glow-color, rgba(90, 79, 240, 0.6)); }
        input[type="range"] { width: 100%; height: 8px; border-radius: 5px; background: rgba(255, 255, 255, 0.15); outline: none; -webkit-appearance: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%; background: var(--color1, #5A4FF0); cursor: pointer; box-shadow: 0 0 10px var(--glow-color, rgba(90, 79, 240, 0.8)); }
        input[type="range"]::-moz-range-thumb { width: 20px; height: 20px; border-radius: 50%; background: var(--color1, #5A4FF0); cursor: pointer; border: none; box-shadow: 0 0 10px var(--glow-color, rgba(90, 79, 240, 0.8)); }
        .toggle-btn { width: 100%; padding: 14px; border: 2px solid rgba(255, 255, 255, 0.2); background: rgba(255, 255, 255, 0.05); color: white; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; font-size: 15px; font-weight: 500; }
        .toggle-btn:hover { background: rgba(255, 255, 255, 0.15); transform: translateY(-2px); }
        .toggle-btn.active { background: var(--color1, #5A4FF0); border-color: var(--color1, #5A4FF0); box-shadow: 0 0 20px var(--glow-color, rgba(90, 79, 240, 0.6)); }
        .value-display { text-align: right; font-size: 13px; color: rgba(255, 255, 255, 0.7); font-weight: 500; }
        .audio-visualizer { height: 50px; background: rgba(255, 255, 255, 0.05); border-radius: 10px; display: flex; align-items: flex-end; gap: 4px; padding: 8px; overflow: hidden; margin-top: 10px; }
        .audio-bar { flex: 1; background: linear-gradient(180deg, var(--color1, #5A4FF0) 0%, var(--color2, #7A7AF5) 100%); border-radius: 3px; transition: height 0.1s ease; box-shadow: 0 0 8px var(--glow-color, rgba(90, 79, 240, 0.5)); }
        .back-link { 
            position: fixed; 
            top: 20px; 
            left: 20px; 
            padding: 12px 24px; 
            background: rgba(10, 10, 15, 0.9); 
            border: 2px solid rgba(138, 43, 226, 0.3); 
            border-radius: 12px; 
            color: white; 
            text-decoration: none; 
            font-weight: 500; 
            transition: all 0.3s ease; 
            backdrop-filter: blur(10px);
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.2);
        }
        .back-link:hover { 
            background: rgba(138, 43, 226, 0.2); 
            transform: translateY(-2px); 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5), 0 0 25px rgba(138, 43, 226, 0.4); 
        }
        .save-mood-btn { width: 100%; padding: 12px; margin-top: 15px; background: var(--color1, #5A4FF0); border: none; color: white; border-radius: 10px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 0 15px var(--glow-color, rgba(90, 79, 240, 0.5)); }
        .save-mood-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 20px var(--glow-color, rgba(90, 79, 240, 0.7)); }
        .calendar-section { 
            background: rgba(10, 10, 15, 0.9); 
            padding: 25px; 
            border-radius: 20px; 
            backdrop-filter: blur(10px); 
            border: 2px solid rgba(138, 43, 226, 0.2); 
            min-width: 320px; 
            max-width: 380px; 
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6), 0 0 20px rgba(138, 43, 226, 0.1); 
        }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .calendar-header h3 { font-size: 20px; color: #fff; margin: 0; }
        .month-nav { display: flex; gap: 10px; }
        .month-nav button { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white; width: 32px; height: 32px; border-radius: 8px; cursor: pointer; font-size: 16px; transition: all 0.3s ease; }
        .month-nav button:hover { background: rgba(255, 255, 255, 0.2); }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; margin-top: 15px; }
        .day-label { text-align: center; font-size: 11px; color: rgba(255, 255, 255, 0.6); font-weight: 600; padding: 8px 0; }
        .day-cell { aspect-ratio: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; cursor: pointer; transition: all 0.3s ease; position: relative; padding: 4px; min-height: 45px; }
        .day-cell:hover { background: rgba(255, 255, 255, 0.15); transform: scale(1.05); }
        .day-cell.empty { background: transparent; border: none; cursor: default; }
        .day-cell.empty:hover { transform: none; }
        .day-cell.today { 
            border: 2px solid var(--color1, #5A4FF0); 
            box-shadow: 0 0 15px var(--glow-color, rgba(90, 79, 240, 0.6)); 
            animation: todayPulse 2s ease-in-out infinite;
        }
        
        @keyframes todayPulse {
            0%, 100% { box-shadow: 0 0 15px var(--glow-color, rgba(90, 79, 240, 0.6)); }
            50% { box-shadow: 0 0 25px var(--glow-color, rgba(90, 79, 240, 0.8)); }
        }
        .day-number { font-size: 13px; font-weight: 600; color: white; margin-bottom: 2px; }
        .mood-indicator { font-size: 16px; line-height: 1; }
        .mood-entries { margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1); max-height: 150px; overflow-y: auto; }
        .mood-entries::-webkit-scrollbar { width: 6px; }
        .mood-entries::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); border-radius: 3px; }
        .mood-entries::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2); border-radius: 3px; }
        .mood-entry { font-size: 12px; color: rgba(255, 255, 255, 0.8); padding: 6px 8px; background: rgba(255, 255, 255, 0.05); border-radius: 6px; margin-bottom: 6px; border-left: 3px solid var(--entry-color, #5A4FF0); }
        .mood-entry-time { font-weight: 600; color: rgba(255, 255, 255, 0.9); }
        .selected-date-title { font-size: 13px; color: rgba(255, 255, 255, 0.7); margin-bottom: 8px; font-weight: 500; }
        .no-entries { font-size: 12px; color: rgba(255, 255, 255, 0.5); text-align: center; padding: 15px; font-style: italic; }
        .help-btn { position: fixed; top: 20px; right: 20px; padding: 12px 24px; background: rgba(138, 43, 226, 0.4); border: 2px solid rgba(138, 43, 226, 0.5); border-radius: 12px; color: white; cursor: pointer; font-weight: 500; transition: all 0.3s ease; backdrop-filter: blur(10px); box-shadow: 0 0 15px rgba(138, 43, 226, 0.2); z-index: 1000; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 14px; }
        .help-btn:hover { background: rgba(138, 43, 226, 0.6); transform: translateY(-2px); }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 2000; justify-content: center; align-items: center; padding: 20px; overflow-y: auto; }
        .modal-overlay.active { display: flex; }
        .modal-content { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 40px; border-radius: 20px; border: 2px solid rgba(138, 43, 226, 0.5); max-width: 800px; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(138, 43, 226, 0.4); position: relative; }
        .modal-content::-webkit-scrollbar { width: 8px; }
        .modal-content::-webkit-scrollbar-thumb { background: rgba(138, 43, 226, 0.5); border-radius: 4px; }
        .modal-close { position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.1); border: 2px solid rgba(138, 43, 226, 0.5); border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 24px; color: white; transition: all 0.3s ease; }
        .modal-close:hover { background: rgba(138, 43, 226, 0.3); transform: rotate(90deg); }
        .modal-title { font-size: 32px; color: #ffaa00; margin-bottom: 20px; text-shadow: 0 0 15px rgba(255, 170, 0, 0.5); }
        .modal-section { margin: 25px 0; }
        .modal-section h3 { color: #8a2be2; font-size: 22px; margin-bottom: 15px; }
        .modal-section p { line-height: 1.8; margin-bottom: 15px; color: rgba(255, 255, 255, 0.9); }
        .modal-section ul { margin-left: 25px; line-height: 1.8; }
        .modal-section li { margin: 10px 0; color: rgba(255, 255, 255, 0.9); }
        .feature-highlight { background: rgba(138, 43, 226, 0.1); border-left: 4px solid #8a2be2; padding: 15px; margin: 15px 0; border-radius: 5px; }
        @media (max-width: 1200px) { .container { flex-direction: column; align-items: center; gap: 30px; } .help-btn { top: 80px; } }
        @media (max-width: 768px) { .lamp-container { transform: scale(0.8); } .calendar-section { min-width: 280px; } }
    </style>
</head>
<body>
    <a href="../../Labs/lamp_lab.html" class="back-link">‚Üê Back to Lab</a>
    <button class="help-btn" id="helpBtn">üìñ Read Description</button>
    
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content">
            <div class="modal-close" id="modalClose">√ó</div>
            <h2 class="modal-title">üí° Ambient Mood Lamp - Mood Tracker</h2>
            
            <div class="modal-section">
                <h3>üéØ What Is This?</h3>
                <p>This is a reimagined lava lamp that <strong>tracks and visualizes your mood</strong> over time. Select how you're feeling, and the lamp changes colors to match. Save your mood daily to build a visual calendar of your emotional journey.</p>
                <div class="feature-highlight">
                    <strong>The Magic:</strong> Your lamp becomes a living mood journal, with colors flowing like emotions and a calendar that shows your emotional patterns.
                </div>
            </div>

            <div class="modal-section">
                <h3>üéÆ How to Use</h3>
                <p><strong>Setting Your Mood:</strong></p>
                <ul>
                    <li>Click one of the 4 mood buttons: <strong>üòå Calm</strong>, <strong>üòä Happy</strong>, <strong>üéØ Focused</strong>, or <strong>üò∞ Stressed</strong></li>
                    <li>Watch the lamp instantly change colors to match your mood</li>
                    <li>The lamp glows with mood-specific colors (purple for calm, yellow for happy, teal for focused, red for stressed)</li>
                </ul>
                
                <p><strong>Adjusting the Lamp:</strong></p>
                <ul>
                    <li><strong>Brightness:</strong> Drag the slider to control lamp intensity (0-100%)</li>
                    <li><strong>Animation Speed:</strong> Control how fast the "lava" blobs move (1-10x)</li>
                    <li><strong>Audio Reactive Mode:</strong> Enable to make the lamp pulse with simulated audio</li>
                </ul>

                <p><strong>Saving Your Mood:</strong></p>
                <ul>
                    <li>Click <strong>"üíæ Save Current Mood"</strong> to record today's mood</li>
                    <li>Your mood is saved with timestamp to the calendar</li>
                    <li>You can save multiple moods per day</li>
                </ul>

                <p><strong>Using the Calendar:</strong></p>
                <ul>
                    <li>Navigate months with <strong>‚Üê ‚Üí</strong> buttons</li>
                    <li>Today's date is highlighted with a glowing border</li>
                    <li>Days with saved moods show an emoji indicator</li>
                    <li>Click any date to view all mood entries for that day</li>
                    <li>Entries show time and mood type</li>
                </ul>
            </div>

            <div class="modal-section">
                <h3>‚ú® Special Features</h3>
                <ul>
                    <li><strong>4 Mood Presets:</strong> Each with unique color schemes and glow effects</li>
                    <li><strong>Animated Lava Blobs:</strong> Floating orbs that change color with your mood</li>
                    <li><strong>Brightness Control:</strong> Adjust lamp intensity to match your environment</li>
                    <li><strong>Speed Control:</strong> Make the animation faster or slower</li>
                    <li><strong>Audio Visualizer:</strong> Simulated audio bars that react to "sound"</li>
                    <li><strong>Mood Calendar:</strong> Visual history of your emotional patterns</li>
                    <li><strong>LocalStorage:</strong> Your mood data persists across sessions</li>
                </ul>
            </div>

            <div class="modal-section">
                <h3>üí° Tips</h3>
                <div class="feature-highlight">
                    <ul style="margin: 0;">
                        <li>Save your mood multiple times a day to track changes</li>
                        <li>Review past months to identify emotional patterns</li>
                        <li>Use the lamp as ambient lighting while working or relaxing</li>
                        <li>Enable audio mode for a more dynamic experience</li>
                        <li>Lower brightness in the evening for a calming effect</li>
                    </ul>
                </div>
            </div>

            <div class="modal-section">
                <h3>üé® Why This Matters</h3>
                <p>Mood tracking is essential for mental health, and this lamp makes it beautiful:</p>
                <ul>
                    <li><strong>Visual Feedback:</strong> See your emotions reflected in real-time</li>
                    <li><strong>Pattern Recognition:</strong> Identify triggers and trends over time</li>
                    <li><strong>Mindfulness:</strong> Regular check-ins promote emotional awareness</li>
                    <li><strong>Ambient Therapy:</strong> Color therapy combined with mood tracking</li>
                    <li><strong>Private & Personal:</strong> Your emotional data stays with you</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="lamp-section">
            <div class="title">üïØÔ∏è Haunted Mood Lamp üëª</div>
            <div class="lamp-container">
                <div class="lamp-top"></div>
                <div class="lamp-glass" id="lampGlass">
                    <div class="lava-blob blob1"></div>
                    <div class="lava-blob blob2"></div>
                    <div class="lava-blob blob3"></div>
                    <div class="lava-blob blob4"></div>
                </div>
                <div class="lamp-base"></div>
            </div>
        </div>
        <div class="controls">
            <h2>Mood Assistant</h2>
            <div class="control-group">
                <label>Select Mood</label>
                <div class="mood-buttons">
                    <button class="mood-btn active" data-mood="calm">üòå Calm</button>
                    <button class="mood-btn" data-mood="happy">üòä Happy</button>
                    <button class="mood-btn" data-mood="focused">üéØ Focused</button>
                    <button class="mood-btn" data-mood="stressed">üò∞ Stressed</button>
                </div>
            </div>
            <div class="control-group">
                <label>Brightness</label>
                <input type="range" id="brightness" min="0" max="100" value="85">
                <div class="value-display" id="brightnessValue">85%</div>
            </div>
            <div class="control-group">
                <label>Animation Speed</label>
                <input type="range" id="speed" min="1" max="10" value="5">
                <div class="value-display" id="speedValue">5x</div>
            </div>
            <div class="control-group">
                <label>Audio Reactive Mode</label>
                <button class="toggle-btn" id="audioToggle">Enable Audio</button>
                <div class="audio-visualizer" id="audioViz" style="display: none;">
                    <div class="audio-bar"></div><div class="audio-bar"></div><div class="audio-bar"></div><div class="audio-bar"></div><div class="audio-bar"></div>
                    <div class="audio-bar"></div><div class="audio-bar"></div><div class="audio-bar"></div><div class="audio-bar"></div><div class="audio-bar"></div>
                </div>
            </div>
            <button class="save-mood-btn" id="saveMoodBtn">üíæ Save Current Mood</button>
        </div>
        <div class="calendar-section">
            <div class="calendar-header">
                <h3 id="currentMonth">December 2024</h3>
                <div class="month-nav">
                    <button id="prevMonth">‚Üê</button>
                    <button id="nextMonth">‚Üí</button>
                </div>
            </div>
            <div class="calendar-grid" id="calendarGrid"></div>
            <div class="mood-entries" id="moodEntries">
                <div class="selected-date-title">Select a date</div>
                <div class="no-entries">Click on a date to view mood entries</div>
            </div>
        </div>
    </div>
    <script>
""
        const moods = { calm: { color1: '#5A4FF0', color2: '#7A7AF5', glow: 'rgba(90, 79, 240, 0.6)' }, happy: { color1: '#FFD45E', color2: '#FF9B42', glow: 'rgba(255, 212, 94, 0.6)' }, focused: { color1: '#00D4C2', color2: '#15F5D1', glow: 'rgba(0, 212, 194, 0.6)' }, stressed: { color1: '#FF6C6C', color2: '#E63946', glow: 'rgba(255, 108, 108, 0.6)' } };
        let currentMood = 'calm', audioActive = false, audioInterval, currentDate = new Date(), selectedDate = null;
        let moodData = JSON.parse(localStorage.getItem('moodCalendar')) || {};
        document.querySelectorAll('.mood-btn').forEach(btn => { btn.addEventListener('click', () => { document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); currentMood = btn.dataset.mood; updateLampColors(); }); });
        const brightnessSlider = document.getElementById('brightness'), brightnessValue = document.getElementById('brightnessValue');
        brightnessSlider.addEventListener('input', (e) => { const value = e.target.value; brightnessValue.textContent = value + '%'; document.getElementById('lampGlass').style.opacity = value / 100; });
        const speedSlider = document.getElementById('speed'), speedValue = document.getElementById('speedValue');
        speedSlider.addEventListener('input', (e) => { const value = e.target.value; speedValue.textContent = value + 'x'; const duration = 10 - value; document.querySelectorAll('.lava-blob').forEach(blob => { blob.style.animationDuration = duration + 's'; }); });
        const audioToggle = document.getElementById('audioToggle'), audioViz = document.getElementById('audioViz');
        audioToggle.addEventListener('click', () => { audioActive = !audioActive; audioToggle.classList.toggle('active'); audioToggle.textContent = audioActive ? 'Disable Audio' : 'Enable Audio'; audioViz.style.display = audioActive ? 'flex' : 'none'; if (audioActive) { startAudioSimulation(); } else { stopAudioSimulation(); } });
        function updateLampColors() { const mood = moods[currentMood]; document.documentElement.style.setProperty('--color1', mood.color1); document.documentElement.style.setProperty('--color2', mood.color2); document.documentElement.style.setProperty('--glow-color', mood.glow); }
        function startAudioSimulation() { const bars = document.querySelectorAll('.audio-bar'); audioInterval = setInterval(() => { bars.forEach(bar => { const height = Math.random() * 100; bar.style.height = height + '%'; }); const intensity = Math.random(); if (intensity > 0.7) { document.getElementById('lampGlass').style.transform = 'scale(1.05)'; setTimeout(() => { document.getElementById('lampGlass').style.transform = 'scale(1)'; }, 100); } }, 150); }
        function stopAudioSimulation() { if (audioInterval) { clearInterval(audioInterval); } }
        function renderCalendar() { const year = currentDate.getFullYear(), month = currentDate.getMonth(); const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']; document.getElementById('currentMonth').textContent = `${monthNames[month]} ${year}`; const firstDay = new Date(year, month, 1).getDay(), daysInMonth = new Date(year, month + 1, 0).getDate(); const grid = document.getElementById('calendarGrid'); grid.innerHTML = ''; const dayLabels = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']; dayLabels.forEach(label => { const dayLabel = document.createElement('div'); dayLabel.className = 'day-label'; dayLabel.textContent = label; grid.appendChild(dayLabel); }); for (let i = 0; i < firstDay; i++) { const emptyCell = document.createElement('div'); emptyCell.className = 'day-cell empty'; grid.appendChild(emptyCell); } const today = new Date(); for (let day = 1; day <= daysInMonth; day++) { const dayCell = document.createElement('div'); dayCell.className = 'day-cell'; const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`; if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) { dayCell.classList.add('today'); } const dayNumber = document.createElement('div'); dayNumber.className = 'day-number'; dayNumber.textContent = day; dayCell.appendChild(dayNumber); if (moodData[dateKey] && moodData[dateKey].length > 0) { const moodIndicator = document.createElement('div'); moodIndicator.className = 'mood-indicator'; const lastMood = moodData[dateKey][moodData[dateKey].length - 1].mood; const moodEmojis = { calm: 'üòå', happy: 'üòä', focused: 'üéØ', stressed: 'üò∞' }; moodIndicator.textContent = moodEmojis[lastMood] || 'üìù'; dayCell.appendChild(moodIndicator); } dayCell.addEventListener('click', () => showMoodEntries(dateKey, day)); grid.appendChild(dayCell); } }
        function showMoodEntries(dateKey, day) { selectedDate = dateKey; const entries = moodData[dateKey] || []; const entriesContainer = document.getElementById('moodEntries'); const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']; const dateParts = dateKey.split('-'); const dateTitle = `${monthNames[parseInt(dateParts[1]) - 1]} ${day}, ${dateParts[0]}`; if (entries.length === 0) { entriesContainer.innerHTML = `<div class="selected-date-title">${dateTitle}</div><div class="no-entries">No mood entries for this day</div>`; } else { const moodColors = { calm: '#5A4FF0', happy: '#FFD45E', focused: '#00D4C2', stressed: '#FF6C6C' }; const moodEmojis = { calm: 'üòå', happy: 'üòä', focused: 'üéØ', stressed: 'üò∞' }; entriesContainer.innerHTML = `<div class="selected-date-title">${dateTitle}</div>`; entries.forEach(entry => { const entryDiv = document.createElement('div'); entryDiv.className = 'mood-entry'; entryDiv.style.setProperty('--entry-color', moodColors[entry.mood]); entryDiv.innerHTML = `<span class="mood-entry-time">${entry.time}</span> - ${moodEmojis[entry.mood]} ${entry.mood.charAt(0).toUpperCase() + entry.mood.slice(1)}`; entriesContainer.appendChild(entryDiv); }); } }
        function saveMood() { const now = new Date(); const dateKey = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`; const timeString = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }); if (!moodData[dateKey]) { moodData[dateKey] = []; } moodData[dateKey].push({ mood: currentMood, time: timeString, timestamp: now.getTime() }); localStorage.setItem('moodCalendar', JSON.stringify(moodData)); renderCalendar(); showMoodEntries(dateKey, now.getDate()); const btn = document.getElementById('saveMoodBtn'); const originalText = btn.textContent; btn.textContent = '‚úì Saved!'; setTimeout(() => { btn.textContent = originalText; }, 2000); }
        document.getElementById('prevMonth').addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() - 1); renderCalendar(); });
        document.getElementById('nextMonth').addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth() + 1); renderCalendar(); });
        document.getElementById('saveMoodBtn').addEventListener('click', saveMood);
        updateLampColors(); document.getElementById('lampGlass').style.transition = 'all 0.3s ease'; document.getElementById('lampGlass').style.opacity = '0.85'; renderCalendar();
        
        // Modal functionality
        const modal = document.getElementById('modalOverlay');
        const helpBtn = document.getElementById('helpBtn');
        const closeBtn = document.getElementById('modalClose');

        helpBtn.addEventListener('click', () => {
            modal.classList.add('active');
        });

        closeBtn.addEventListener('click', () => {
            modal.classList.remove('active');
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.remove('active');
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                modal.classList.remove('active');
            }
        });
    </script>
</body>
</html>
